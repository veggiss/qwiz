@model ApplicationUser
@{
    var xp = Model.Xp;
    var xpNeeded = Model.XpNeeded;
    var online = Model.LastActivity > DateTime.Now.AddMinutes(-2);
}

<div class="container">
    <div class="row text-center">
        <div class="col-sm">
            <div class="d-flex flex-column">
                <h1>Level</h1>
                <h1>@Model.Level</h1>
            </div>
        </div>
        <div class="col-sm">
            <div class="d-flex flex-column">
                <img class="avatar mx-auto d-block m-2" alt="" src="https://images.immediate.co.uk/volatile/sites/4/2018/08/iStock_000044061370_Medium-fa5f8aa.jpg?quality=45&crop=5px,17px,929px,400px&resize=960,413">
                <span class="badge badge-pill badge-light">@Model.UserName (@Model.FirstName @Model.LastName)</span>
                @{
                    if (online)
                    {
                        <t class="badge badge-pill badge-success">Online</t>
                    }
                    else
                    {
                        <t class="badge badge-pill badge-danger">Offline (Last seen: @Model.LastActivity)</t>
                    }
                }
            </div>
        </div>
        <div class="col-sm">
            <h1>Quizzes taken</h1>
            <h1>@Model.QuizzesTaken.Count</h1>
        </div>
    </div>
   
    <div class="progress position-relative m-1" style="height: 29px;">
        <div class="progress-bar" role="progressbar"></div>
    <h4 class="justify-content-center d-flex position-absolute w-100">
        @xp / @xpNeeded
    </h4>
    </div>
<div>
    <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" id="history-tab" data-toggle="tab" href="#history" role="tab" aria-controls="history" aria-selected="true">History</a>
        </li>
            
        <li class="nav-item">
            <a class="nav-link" id="myquizzes-tab" data-toggle="tab" href="#myquizzes" role="tab" aria-controls="myquizzes" aria-selected="false">My Qwizzes</a>
        </li>
        <li>
            <a class="nav-link" id="badges-tab" data-toggle="tab" href="#badges" role="tab" aria-controls="badges" aria-selected="false">Badges</a>
        </li>
    </ul>
</div>

<div class="tab-content" id="myTabContent">
    <div class="tab-pane fade show active" id="history" role="tabpanel" aria-labelledby="history-tab">
     <p>History</p>
    </div>
    <div class="tab-pane fade" id="myquizzes" role="tabpanel" aria-labelledby="myquizzes-tab">       
            @foreach (var item in Model.MyQuizzes)
            {
                <div class="float-left m-1 p-2 table-active" style="border-radius: 6px; width: 10.62rem;">
                    <h6 class="card-title">@item.Topic</h6>
                    <h6 class="card-subtitle mb-2 text-muted">@item.Category</h6>
                    <h6 class="card-subtitle mb-2 text-muted">@item.Description</h6>
                    <a class="badge badge-dark" asp-controller="Quiz" asp-action="Edit" asp-route-id="@item.Id">Edit</a>
                </div>
            }
    </div>
    <div class="tab-pane fade" id="badges" role="tabpanel" aria-labelledby="badges-tab">
        <p>badges</p>
    </div>
</div>

@section Scripts
{
    <script>
        $(".progress-bar").css("width", ((@Model.Xp) / (@Model.XpNeeded)) * 100 + "%");
    </script>
}
